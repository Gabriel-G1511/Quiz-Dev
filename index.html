<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz JavaScript</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121214;
    color: #a116d8;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center;
    justify-content: center;
  }
  #start-screen, #quiz-container, #result-screen, #ranking-screen {
    width: 90%;
    max-width: 600px;
    background: #1e1e2f;
    border-radius: 8px;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
    box-shadow: 0 0 10px #3b3b6b;
  }
  #start-screen input {
    width: 80%;
    padding: 10px;
    font-size: 1.2em;
    border-radius: 5px;
    border: none;
    outline: none;
    margin-bottom: 15px;
  }
  #score-partial {
    width: 90%;
    max-width: 600px;
    background: #222240;
    color: #eee;
    padding: 10px 20px;
    border-radius: 8px;
    box-sizing: border-box;
    margin-bottom: 10px;
    font-weight: bold;
    text-align: right;
    box-shadow: 0 0 10px #3b3b6b;
    display: none;
  }
  #question {
    font-size: 1.4em;
    margin-bottom: 20px;
  }
  .answer-btn {
    display: block;
    width: 100%;
    background: #4a47a3;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 12px;
    font-size: 1.1em;
    margin-bottom: 12px;
    cursor: pointer;
    box-shadow: 0 0 8px #4a47a3;
    transition: background-color 0.3s ease;
    text-align: left;
  }
  .answer-btn:hover {
    background: #3a3c8d;
  }
  .answer-btn.correct {
    background: #28a745 !important;
    box-shadow: 0 0 10px #28a745 !important;
  }
  .answer-btn.wrong {
    background: #dc3545 !important;
    box-shadow: 0 0 10px #dc3545 !important;
  }
  #next-btn {
    background: #4a47a3;
    color: white;
    border: none;
    padding: 12px 25px;
    font-size: 1.1em;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 0 8px #4a47a3;
    margin-top: 15px;
    display: none;
    transition: background-color 0.3s ease;
  }
  #next-btn:hover {
    background: #3a3c8d;
  }
  #progress {
    margin-top: 15px;
    font-size: 0.9em;
    color: #bbb;
  }
  #explanation {
    margin-top: 10px;
    font-style: italic;
    color: #ccc;
  }
  @media (max-width: 400px) {
    #start-screen input {
      width: 100%;
      font-size: 1em;
    }
    .answer-btn {
      font-size: 1em;
      padding: 10px;
    }
    #next-btn {
      width: 100%;
      padding: 10px;
    }
  }
</style>
</head>
<body>
<div id="start-screen">
  <h1>Quiz JavaScript</h1>
  <input type="text" id="username" placeholder="Digite seu nome e pressione Enter" autocomplete="off" />
</div>
<div id="score-partial">Pontuação: 0 acertos / 0 erros</div>
<div id="quiz-container" style="display:none;">
  <div id="question"></div>
  <div id="answers"></div>
  <button id="next-btn" type="button">Próxima</button>
  <div id="progress"></div>
  <div id="explanation"></div>
</div>
<div id="result-screen" style="display:none;">
  <h2>Fim do Quiz, <span id="user-name-final"></span>!</h2>
  <p>Sua pontuação: <span id="score"></span> de <span id="total-questions"></span></p>
  <div id="report"></div>
  <button id="restart-btn" type="button">Reiniciar Quiz</button>
</div>
<div id="ranking-screen" style="display:none;">
  <h2>Ranking</h2>
  <ul id="ranking-list"></ul>
</div>
<script>
(() => {
  'use strict';

  // Array completo com 50 perguntas no formato ideal
  const questionsBank = [
    {
      question: "O que significa 'var' em JavaScript?",
      options: ["Variável", "Valor", "Variação", "Validação"],
      answer: 0,
      explanation: "'var' é usado para declarar variáveis em JavaScript, mas hoje se prefere 'let' ou 'const' por escopo melhor."
    },
    {
      question: "Qual comando adiciona um elemento no final de um array?",
      options: ["push()", "pop()", "shift()", "unshift()"],
      answer: 0,
      explanation: "'push()' adiciona um elemento ao final do array."
    },
    {
      question: "Qual método converte um JSON para objeto JavaScript?",
      options: ["JSON.parse()", "JSON.stringify()", "JSON.convert()", "JSON.toObject()"],
      answer: 0,
      explanation: "'JSON.parse()' converte uma string JSON para objeto JavaScript."
    },
    {
      question: "Qual palavra-chave declara uma constante em JavaScript?",
      options: ["const", "let", "var", "constant"],
      answer: 0,
      explanation: "'const' declara uma constante cujo valor não pode ser reatribuído."
    },
    {
      question: "O que faz o método 'map()' em arrays?",
      options: [
        "Cria um novo array transformando cada elemento",
        "Remove elementos duplicados",
        "Ordena o array",
        "Filtra elementos"
      ],
      answer: 0,
      explanation: "'map()' cria um novo array aplicando uma função a cada elemento do array original."
    },
    {
      question: "Qual o resultado de 'typeof null' em JavaScript?",
      options: ["object", "null", "undefined", "boolean"],
      answer: 0,
      explanation: "Por uma peculiaridade do JavaScript, 'typeof null' retorna 'object'."
    },
    {
      question: "Como declara uma função anônima?",
      options: [
        "const f = function() {}",
        "function f() {}",
        "const f = () => {}",
        "Ambas as opções 1 e 3"
      ],
      answer: 3,
      explanation: "Funções anônimas podem ser atribuídas a variáveis, tanto com 'function' quanto com arrow functions."
    },
    {
      question: "Qual operador é usado para comparação estrita?",
      options: ["===", "==", "=", "!="],
      answer: 0,
      explanation: "'===' compara valor e tipo, evitando coerções inesperadas."
    },
    {
      question: "Qual estrutura de repetição executa pelo menos uma vez?",
      options: ["do...while", "while", "for", "foreach"],
      answer: 0,
      explanation: "'do...while' executa o bloco antes de testar a condição."
    },
    {
      question: "Como acessar o primeiro elemento de um array 'arr'?",
      options: ["arr[0]", "arr[1]", "arr.first", "arr.firstElement"],
      answer: 0,
      explanation: "Arrays são indexados a partir do zero, então o primeiro elemento é arr[0]."
    },
    {
      question: "O que faz o método 'filter()'?",
      options: [
        "Cria um novo array com elementos que passam em um teste",
        "Remove o último elemento",
        "Adiciona um elemento no início",
        "Ordena o array"
      ],
      answer: 0,
      explanation: "'filter()' retorna um novo array com elementos que satisfazem a condição dada."
    },
    {
      question: "Qual evento ocorre quando uma página é carregada?",
      options: ["load", "click", "submit", "mouseover"],
      answer: 0,
      explanation: "O evento 'load' dispara quando a página e seus recursos estão completamente carregados."
    },
    {
      question: "Como impedir o comportamento padrão de um evento?",
      options: ["event.preventDefault()", "event.stopPropagation()", "return false", "event.stopImmediatePropagation()"],
      answer: 0,
      explanation: "'preventDefault()' previne ações padrão como o envio de formulário."
    },
    {
      question: "Qual método adiciona um evento a um elemento?",
      options: ["addEventListener()", "attachEvent()", "onEvent()", "setEvent()"],
      answer: 0,
      explanation: "'addEventListener()' é a forma padrão de adicionar ouvintes de eventos."
    },
    {
      question: "Qual palavra-chave cria um bloco de código que pode lançar exceções?",
      options: ["try", "catch", "finally", "throw"],
      answer: 0,
      explanation: "'try' define o bloco onde exceções podem ser capturadas."
    },
    {
      question: "O que faz 'JSON.stringify()'?",
      options: ["Converte objeto para JSON", "Converte JSON para objeto", "Compara JSON", "Formata JSON"],
      answer: 0,
      explanation: "'JSON.stringify()' converte um objeto JavaScript para uma string JSON."
    },
    {
      question: "Qual palavra-chave declara variáveis com escopo de bloco?",
      options: ["let", "var", "const", "static"],
      answer: 0,
      explanation: "'let' declara variáveis que existem apenas dentro do bloco onde são definidas."
    },
    {
      question: "Qual operador é usado para atribuição?",
      options: ["=", "==", "===", "+="],
      answer: 0,
      explanation: "'=' atribui valor a uma variável."
    },
    {
      question: "Como chama uma função imediatamente executada?",
      options: ["IIFE", "Callback", "Closure", "Promise"],
      answer: 0,
      explanation: "IIFE é uma função que se executa imediatamente após ser definida."
    },
    {
      question: "Qual a saída de 'console.log(1 + \"2\" + 3)'?",
      options: ["123", "6", "33", "NaN"],
      answer: 0,
      explanation: "JavaScript concatena strings, então 1 + '2' vira '12', depois + 3 vira '123'."
    },
    {
      question: "Como declarar um array em JavaScript?",
      options: ["let arr = [];", "let arr = {};", "let arr = ();", "let arr = <>;"],
      answer: 0,
      explanation: "Arrays são declarados com colchetes []."
    },
    {
      question: "Qual método remove o último elemento de um array?",
      options: ["pop()", "push()", "shift()", "unshift()"],
      answer: 0,
      explanation: "'pop()' remove o último elemento e o retorna."
    },
    {
      question: "Qual é o valor de '2' + 2 em JavaScript?",
      options: ["'22'", "4", "NaN", "undefined"],
      answer: 0,
      explanation: "O operador '+' concatena string e número, resultando em '22'."
    },
    {
      question: "Como converter uma string para número?",
      options: ["Number()", "String()", "parseString()", "toNumber()"],
      answer: 0,
      explanation: "'Number()' converte uma string em número, quando possível."
    },
    {
      question: "Qual operador lógico 'E' em JavaScript?",
      options: ["&&", "||", "!", "=="],
      answer: 0,
      explanation: "'&&' é o operador lógico 'E' (AND)."
    },
    {
      question: "Qual operador lógico 'OU' em JavaScript?",
      options: ["||", "&&", "!", "=="],
      answer: 0,
      explanation: "'||' é o operador lógico 'OU' (OR)."
    },
    {
      question: "O que faz o método 'slice()' em arrays?",
      options: [
        "Retorna uma cópia parcial do array",
        "Remove elementos",
        "Adiciona elementos",
        "Ordena o array"
      ],
      answer: 0,
      explanation: "'slice()' retorna uma parte do array sem modificar o original."
    },
    {
      question: "Qual a saída de 'Boolean(0)'?",
      options: ["false", "true", "0", "undefined"],
      answer: 0,
      explanation: "O valor 0 é considerado falso em contextos booleanos."
    },
    {
      question: "Como acessar a propriedade 'name' de um objeto 'obj'?",
      options: ["obj.name", "obj['name']", "Ambos", "Nenhum"],
      answer: 2,
      explanation: "Ambas as formas são válidas para acessar propriedades."
    },
    {
      question: "O que é um closure?",
      options: [
        "Função com acesso ao seu escopo externo",
        "Uma variável global",
        "Um tipo de objeto",
        "Uma palavra-chave"
      ],
      answer: 0,
      explanation: "Closure é função que lembra o escopo onde foi criada."
    },
    {
      question: "Qual método converte uma string para inteiro?",
      options: ["parseInt()", "parseFloat()", "Number()", "toFixed()"],
      answer: 0,
      explanation: "'parseInt()' analisa uma string e retorna um inteiro."
    },
    {
      question: "O que faz o método 'reduce()'?",
      options: [
        "Acumula valores do array em um único valor",
        "Remove elementos duplicados",
        "Ordena o array",
        "Filtra elementos"
      ],
      answer: 0,
      explanation: "'reduce()' processa o array para um único resultado com uma função acumuladora."
    },
    {
      question: "Como declarar um objeto vazio?",
      options: ["{}", "[]", "()", "null"],
      answer: 0,
      explanation: "Objetos vazios são declarados com chaves {}."
    },
    {
      question: "Qual palavra-chave cria uma variável global no escopo de função?",
      options: ["var", "let", "const", "global"],
      answer: 0,
      explanation: "'var' cria variável com escopo de função, podendo ser global se declarada fora de funções."
    },
    {
      question: "Como tratar erros em JavaScript?",
      options: ["try...catch", "if...else", "switch", "for"],
      answer: 0,
      explanation: "'try...catch' é usado para capturar exceções e tratar erros."
    },
    {
      question: "Qual operador é usado para negar um valor booleano?",
      options: ["!", "&&", "||", "?"],
      answer: 0,
      explanation: "'!' é o operador NOT, nega valores booleanos."
    },
    {
      question: "O que faz o método 'sort()'?",
      options: [
        "Ordena os elementos de um array",
        "Remove elementos",
        "Adiciona elementos",
        "Filtra elementos"
      ],
      answer: 0,
      explanation: "'sort()' ordena os elementos do array in-place."
    },
    {
      question: "Como criar uma Promise?",
      options: [
        "new Promise((resolve, reject) => {})",
        "promise.create()",
        "Promise.new()",
        "async function()"
      ],
      answer: 0,
      explanation: "Promises são criadas com o construtor 'new Promise'."
    },
    {
      question: "Qual método é usado para aguardar uma Promise?",
      options: ["await", "then", "catch", "finally"],
      answer: 0,
      explanation: "'await' pausa a execução até que a Promise seja resolvida."
    },
    {
      question: "Qual palavra-chave declara uma função assíncrona?",
      options: ["async", "await", "defer", "promise"],
      answer: 0,
      explanation: "'async' declara uma função assíncrona que pode usar 'await'."
    }
  ];

  // DOM Elements
  const startScreen = document.getElementById('start-screen');
  const usernameInput = document.getElementById('username');
  const scorePartial = document.getElementById('score-partial');
  const quizContainer = document.getElementById('quiz-container');
  const questionEl = document.getElementById('question');
  const answersEl = document.getElementById('answers');
  const nextBtn = document.getElementById('next-btn');
  const progressEl = document.getElementById('progress');
  const explanationEl = document.getElementById('explanation');
  const resultScreen = document.getElementById('result-screen');
  const userNameFinal = document.getElementById('user-name-final');
  const scoreFinal = document.getElementById('score');
  const totalQuestionsEl = document.getElementById('total-questions');
  const reportEl = document.getElementById('report');
  const restartBtn = document.getElementById('restart-btn');

  let userName = '';
  let currentIndex = 0;
  let score = 0;
  let wrongs = 0;
  let questions = [];

  // Função para embaralhar array (Fisher-Yates)
  function shuffleArray(arr) {
    for (let i = arr.length -1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  // Inicia o quiz
  function startQuiz() {
  currentIndex = 0;
  score = 0;
  wrongs = 0;
  explanationEl.textContent = '';
  scorePartial.textContent = `Pontuação: 0 acertos / 0 erros`;
  reportEl.innerHTML = '';
  // Cria uma cópia do banco, embaralha e seleciona só 20 perguntas
  questions = [...questionsBank];
  shuffleArray(questions);
  questions = questions.slice(0, 20); // Limita a 20 perguntas
  startScreen.style.display = 'none';
  scorePartial.style.display = 'block';
  quizContainer.style.display = 'block';
  resultScreen.style.display = 'none';
  nextBtn.style.display = 'none';
  renderQuestion();
  updateProgress();
}


  // Renderiza pergunta e opções
  function renderQuestion() {
    explanationEl.textContent = '';
    nextBtn.style.display = 'none';
    const q = questions[currentIndex];
    questionEl.textContent = q.question;
    answersEl.innerHTML = '';
    q.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.className = 'answer-btn';
      btn.type = 'button';
      btn.dataset.index = i;
      btn.addEventListener('click', () => selectAnswer(i));
      answersEl.appendChild(btn);
    });
  }

  // Seleciona resposta e atualiza interface
  function selectAnswer(selectedIndex) {
    const q = questions[currentIndex];
    const buttons = answersEl.querySelectorAll('button');
    buttons.forEach(btn => btn.disabled = true);

    buttons.forEach(btn => {
      if (parseInt(btn.dataset.index) === q.answer) {
        btn.classList.add('correct');
      }
      if (parseInt(btn.dataset.index) === selectedIndex && selectedIndex !== q.answer) {
        btn.classList.add('wrong');
      }
    });

    if (selectedIndex === q.answer) {
      score++;
      explanationEl.textContent = "✔️ Correto! " + q.explanation;
    } else {
      wrongs++;
      explanationEl.textContent = "❌ Errado! " + q.explanation;
    }

    scorePartial.textContent = `Pontuação: ${score} acertos / ${wrongs} erros`;
    nextBtn.style.display = 'inline-block';
  }

  // Evento do botão Próxima pergunta
  nextBtn.addEventListener('click', () => {
    currentIndex++;
    if (currentIndex >= questions.length) {
      showResult();
    } else {
      renderQuestion();
      updateProgress();
    }
  });

  // Atualiza o texto do progresso
  function updateProgress() {
    progressEl.textContent = `Questão ${currentIndex + 1} de ${questions.length}`;
  }

  // Exibe resultado final
  function showResult() {
    quizContainer.style.display = 'none';
    scorePartial.style.display = 'none';
    resultScreen.style.display = 'block';
    userNameFinal.textContent = userName;
    scoreFinal.textContent = score;
    totalQuestionsEl.textContent = questions.length;
    reportEl.innerHTML = `<p>Você acertou <strong>${score}</strong> perguntas e errou <strong>${wrongs}</strong>.</p>`;
  }

  // Reinicia quiz para um novo usuário
  restartBtn.addEventListener('click', () => {
    usernameInput.value = '';
    userName = '';
    startScreen.style.display = 'block';
    quizContainer.style.display = 'none';
    resultScreen.style.display = 'none';
    scorePartial.style.display = 'none';
    usernameInput.focus();
  });

  // Inicia quiz ao pressionar Enter no input nome
  usernameInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter' && usernameInput.value.trim() !== '') {
      e.preventDefault();
      userName = usernameInput.value.trim();
      startQuiz();
    }
  });

})();

</script>
</body>
</html>
